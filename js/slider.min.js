"use strict";
document.addEventListener("DOMContentLoaded", function () {
  const sliderContainer = document.querySelector(".slider");
  const sliderFigures = sliderContainer.querySelectorAll(".slider-figure");
  const links = sliderContainer.querySelectorAll(".slider-nav-link");
  if (
    sliderContainer !== null &&
    sliderFigures.length > 0 &&
    links.length > 0 &&
    sliderContainer.querySelector(".is-active") !== null
  ) {
    console.log("Le slider est prêt à fonctionner");
    let index = 0;
    links.forEach(function (link) {
      link.addEventListener("click", function (e) {
        e.preventDefault();
        if (this.classList.contains("prev")) {
          index--;
          if (index < 0) {
            index = sliderFigures.length - 1;
          }
        } else {
          index++;
          if (index == sliderFigures.length) {
            index = 0;
          }
        }
        document
          .querySelector(".slider-figure.is-active")
          .classList.remove("is-active");
        sliderFigures[index].classList.add("is-active");
        console.log(
          "Source de la photo affichée : " +
            sliderFigures[index].querySelector("img").src
        );
      });
    });
  }
});
